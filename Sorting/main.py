import numpy
import os
import glob
from PIL import Image
import shutil as sp

trainLabels = "trainLabels.txt"

pictures_path = r"E:\tdkMalwareKepek\hatvannegy"
save_path_first = r"E:\tdkMalwareKepek\hatvannegysorted\first"
save_path_second = r"E:\tdkMalwareKepek\hatvannegysorted\second"
save_path_third = r"E:\tdkMalwareKepek\hatvannegysorted\third"
save_path_fourth = r"E:\tdkMalwareKepek\hatvannegysorted\fourth"
save_path_fifth = r"E:\tdkMalwareKepek\hatvannegysorted\fifth"
save_path_sixth = r"E:\tdkMalwareKepek\hatvannegysorted\sixth"
save_path_seventh = r"E:\tdkMalwareKepek\hatvannegysorted\seventh"
save_path_eighth = r"E:\tdkMalwareKepek\hatvannegysorted\eighth"
save_path_nineth = r"E:\tdkMalwareKepek\hatvannegysorted\nineth"

image_class = []

def read_classes_in(file):
    file_class_pair = []
    with open(file, 'r', encoding='utf-8') as f:
        while True:
            line = f.readline()
            if not line:
                break
            line = line[:-1]
            file_class_pair = line.split(',')
            image_class.append(file_class_pair)

def sorting(image_path, im_class):
    for im in image_path:
        name = os.path.basename(im).split(".")[0]
        for subclass in im_class:
            if name == subclass[0]:
                if subclass[1] == '1':
                    sp.copy2(im, save_path_first)
                    break
                elif subclass[1] == '2':
                    sp.copy2(im, save_path_second)
                    break
                elif subclass[1] == '3':
                    sp.copy2(im, save_path_third)
                    break
                elif subclass[1] == '4':
                    sp.copy2(im, save_path_fourth)
                    break
                elif subclass[1] == '5':
                    sp.copy2(im, save_path_fifth)
                    break
                elif subclass[1] == '6':
                    sp.copy2(im, save_path_sixth)
                    break
                elif subclass[1] == '7':
                    sp.copy2(im, save_path_seventh)
                    break
                elif subclass[1] == '8':
                    sp.copy2(im, save_path_eighth)
                    break
                elif subclass[1] == '9':
                    sp.copy2(im, save_path_nineth)
                    break
                else:
                    break




if __name__ == "__main__":
    read_classes_in(trainLabels)

    file_paths = []
    for file in glob.glob(pictures_path + "/*"):
        if file.endswith(".png"):
            file_paths.append(file)

    sorting(file_paths, image_class)